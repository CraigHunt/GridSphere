
<!--

<!DOCTYPE article PUBLIC "-//OASIS//DTD DocBook XML V4.2//EN"
  "http://www.oasis-open.org/docbook/xml/4.2/docbookx.dtd">

    Author:     Jason Novotny
    Version:    $Id$
-->

<chapter id="portlet-descriptor">
    <title>Portlet Descriptor</title>
    <para>
        The Portlet descriptor known as <filename>portlet.xml</filename> defines the application
        portlet definitions and one or more concrete portlet definitions. The following section describes
        the available elements and attributes that can be used inside a portlet descriptor.
    </para>
    <para>
        The Portlet descriptor has the following structure:
    </para>
    <informalexample id="portlet.def">
        <programlisting>

&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;portlet-app-collection&gt; <co id="portlet.app.collection"/>
    &lt;portlet-app-def&gt;  <co id="portlet.app.def"/>
            &lt;portlet-app ...&gt;  <co id="portlet.app"/>
            &lt;concrete-portlet-app ...&gt; <co id="portlet.concapp"/>
            &lt;concrete-portlet-app ...&gt;
      &lt;/portlet-app-def&gt;
&lt;/portlet-app-collection&gt;
        </programlisting>
        <calloutlist>
        <callout arearefs="portlet.app.collection">
            <para>
            The portlet-app-collection defines a collection of portlets
            </para>
        </callout>
        <callout arearefs="portlet.app.def">
            <para>
            The portlet-app-def defines an application portlet and one or more concrete portlet instances
            </para>
        </callout>
        <callout arearefs="portlet.app">
            <para>
                The portlet-app provides an application portlet definition
            </para>
        </callout>
        <callout arearefs="portlet.concapp">
            <para>
                The concrete-portlet-app provides a concrete portlet definition
            </para>
        </callout>
        </calloutlist>
    </informalexample>

    <sect1>
      <title>The Application Portlet Definition</title>
        <para>An application portlet definition defines properties that are fixed for all
            concrete portlet instances of this portlet. The following sample illustrates
            the elements and attributes associated with an application portlet definition.
        </para>

        <informalexample id="app.def">
        <programlisting>
        &lt;portlet-app id="org.myorganization.portlets.myportlet"&gt; <co id="app.id"/>
            &lt;portlet-name&gt;Hello World&lt;/portlet-name&gt; <co id="portlet.name"/>
            &lt;servlet-name&gt;hello&lt;/servlet-name&gt; <co id="servlet.name"/>
            &lt;portlet-config&gt; <co id="app.portlet.config"/>
                &lt;param-name&gt;AppConfigOne&lt;/param-name&gt;
                &lt;param-value&gt;one&lt;/param-value&gt;
            &lt;/portlet-config&gt;
            &lt;portlet-config&gt;
                &lt;param-name&gt;AppConfigTwo&lt;/param-name&gt;
                &lt;param-value&gt;two&lt;/param-value&gt;
            &lt;/portlet-config&gt;
            &lt;allows&gt;           <co id="portlet.allows"/>
                &lt;maximized/&gt;
                &lt;minimized/&gt;
            &lt;/allows&gt;
            &lt;supports&gt;       <co id="portlet.supports"/>
                &lt;view/&gt;
                &lt;edit/&gt;
                &lt;help/&gt;
                &lt;configure/&gt;
            &lt;/supports&gt;
        &lt;/portlet-app&gt;
       </programlisting>
        <calloutlist>
            <callout arearefs="app.id">
            <para>
                The <varname>id</varname> specifies the actual portlet class
            </para>
            </callout>
            <callout arearefs="portlet.name">
            <para>
                (Optional) An identifying name. Currently this is not used.
            </para>
            </callout>
            <callout arearefs="app.portlet.config">
            <para>
                Defines configuration information for this portlet that is accessible via the
                &PortletConfig; object described in the
                <link linkend='portlet-objects' endterm="portlet-objects-title"/> chapter.
            </para>
            </callout>
            <callout arearefs="portlet.allows">
            <para>
                (Optional) Defines the supported window states of this portlet. Possible
                values include <emphasis>minimized</emphasis> and <emphasis>maximized</emphasis>.
                If not specified both states are supported.
            </para>
            </callout>
            <callout arearefs="portlet.supports">
            <para>
                (Optional) Defines which portlet modes are supported for various markups.
                If this is not specified, all modes are enabled.
            </para>
            </callout>
        </calloutlist>
        </informalexample>

    </sect1>

    <sect1 id="concrete.portlet">
        <title id="concrete.portlet.title">The Concrete Portlet Definition</title>
        <para>A concrete portlet definition defines properties that are specific to
            each concrete portlet instance. Multiple concrete portlets can exist for a single
            application portlet. The following sample illustrates the elements and attributes
            associated with a concrete portlet definition.
        </para>

        <informalexample id="conc.def">
        <programlisting>
        &lt;concrete-portlet-app id="org.myorganization.portlets.myportlet.1"&gt; <co id="conc.id"/>
            &lt;context-param&gt; <co id="conc.context"/>
                &lt;param-name&gt;buzzle&lt;/param-name&gt;
                &lt;param-value&gt;yea&lt;/param-value&gt;
            &lt;/context-param&gt;
            &lt;concrete-portlet&gt; <co id="conc.portlet"/>
                &lt;portlet-name&gt;Hello World 1&lt;/portlet-name&gt; <co id="conc.name"/>
                &lt;default-locale&gt;en&lt;/default-locale&gt; <co id="conc.deflocale"/>
                &lt;language locale="en_US"&gt;  <co id="conc.locale"/>
                    &lt;title&gt;Hello World - Sample Portlet #1&lt;/title&gt; <co id="conc.title"/>
                    &lt;title-short&gt;Hello World&lt;/title-short&gt; <co id="conc.title.short"/>
                    &lt;description&gt;Here is a simple portlet&lt;/description&gt; <co id="conc.description"/>
                    &lt;keywords&gt;portlet hello world&lt;/keywords&gt; <co id="conc.keywords"/>
                &lt;/language&gt;
                &lt;language locale="en_DE"&gt;
                    &lt;title&gt;Hallo Welt - Sample Portlet #1&lt;/title&gt;
                    &lt;title-short&gt;Hallo Welt&lt;/title-short&gt;
                    &lt;description&gt;Hier ist ein gleicht portlet&lt;/description&gt;
                    &lt;keywords&gt;portlet hallo welt&lt;/keywords&gt;
                &lt;/language&gt;
                &lt;allowed-access visibility="PRIVATE" role="ADMIN"/&gt; <co id="conc.visibility"/>
                &lt;config-param&gt;    <co id="conc.config"/>
                    &lt;param-name&gt;a config parameter&lt;/param-name&gt;
                    &lt;param-value&gt;a config value&lt;/param-value&gt;
                &lt;/config-param&gt;
            &lt;/concrete-portlet&gt;
        &lt;/concrete-portlet-app&gt;
    </programlisting>
        <calloutlist>
            <callout arearefs="conc.id">
            <para>
                The <varname>id</varname> specifies the concrete portlet identifier. This <emphasis>must</emphasis>
                be equivalent to the application portlet id with the addition of a <emphasis>unique</emphasis> integer
                id following the classname. Generally it is good practice to start with <constant>1</constant> and
                increase the count for each additional concrete portlet.
            </para>
            </callout>
            <callout arearefs="conc.context">
            <para>
                (Optional) Defines the portlet context information encapsulated by the &PortletApplicationSettings; object
                described in the <link linkend='portlet-objects' endterm="portlet-objects-title"/> chapter.
            </para>
            </callout>
            <callout arearefs="conc.portlet">
            <para>
               The concrete portlet is used to create the &PortletSettings; object
               described in the <link linkend='portlet-objects' endterm="portlet-objects-title"/> chapter.
            </para>
            </callout>
            <callout arearefs="conc.name">
            <para>
                (Optional) An identifying name for this concrete portlet. Currently this is not used.
            </para>
            </callout>
            <callout arearefs="conc.deflocale">
            <para>
                (Optional) The default locale to use for this concrete portlet.
            </para>
            </callout>
            <callout arearefs="conc.locale">
            <para>
                (Optional) Defines additional language support for the defined locale.
            </para>
            </callout>
            <callout arearefs="conc.title">
            <para>
                (Optional) The title specified is used during the rendering of the portlet's title bar.
            </para>
            </callout>
            <callout arearefs="conc.title.short">
            <para>
                (Optional) A more concise title that may be used for rendering portlets in WML enabled devices. Currently
                not used.
            </para>
            </callout>
            <callout arearefs="conc.description">
            <para>
                (Optional) A brief description of capabilities provided by this portlet. Currently not used.
            </para>
            </callout>
            <callout arearefs="conc.keywords">
            <para>
                (Optional) A list of keywords that can be used to index this portlet from a portlet lookup
                service (when one becomes available ;-)) Currently not used.
            </para>
            </callout>
            <callout arearefs="conc.visibility">
            <para>
                (Optional) The <varname>visibility</varname> attribute defines who can see information about this portlet.
                Allowed values are <constant>PRIVATE</constant> and <constant>PUBLIC</constant>. The
                <varname>role</varname> attribute defines which role a user must have to have access to this portlet.
                Valid values are any of the roles defined in the &PortletRole; object defined in more detail in the
                <link linkend='portlet-objects' endterm="portlet-objects-title"/> chapter.
            </para>
            </callout>
            <callout arearefs="conc.config">
            <para>
                Addtional concrete portlet settings that are maintained in the &PortletSettings;
                object described in the <link linkend='portlet-objects' endterm="portlet-objects-title"/> chapter.
            </para>
            </callout>
        </calloutlist>
    </informalexample>
    </sect1>
</chapter>
